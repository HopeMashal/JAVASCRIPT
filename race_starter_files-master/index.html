<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Race üèé</title>
    <link rel="shortcut icon" href="data:image/x-icon;" type="image/x-icon" />

    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="banner">
      <h1 class="text-center">Race</h1>
      <p>Enter an ArrowRight to move the red car<br>
         Enter an ArrowLeft to move the red car</p>
    </div>
    <hr />
    <!-- You race HTML code here -->
    <table class="racer-table">
      <tr id="player1-race">
        <td class="active"></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td class="finish"></td>
      </tr>
      <tr id="player2-race">
        <td class="active"></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td class="finish"></td>
      </tr>
    </table>
    <hr />

    <script>
      const Player1 = document.querySelectorAll("#player1-race td"); //player 1 path
      const Player2 = document.querySelectorAll("#player2-race td"); //player 2 path
      let player1Pos = 0; //player 1 position 
      let player2Pos = 0; //player 2 position

      window.addEventListener("keyup", (e) => { //enter the keyup
          if (e.key == "ArrowRight") { // check the keyup
              MovePlayer(Player1, player1Pos); //move player 1 to next td in the path
              if (player1Pos == Player1.length - 1) { //if player 1 position equal last td in the path
                  alert("The winner of the race is the red car \n To restart the game click OK");
                  window.location.reload(); //Reload the website
              }
          } else if (e.key == "ArrowLeft") { // check the keyup
              MovePlayer(Player2, player2Pos); //move player 2 to next td in the path
              if (player2Pos == Player2.length - 1) { //if player 2 position equal last td in the path
                  alert("The winner of the race is the yellow car \n To restart the game click OK");
                  window.location.reload(); //Reload the website
              }
          }
      });
      function MovePlayer(player, position) { //move player function
          if (player == Player1 && Player1[position + 1]) { //for player 1
              Player1[position].classList.toggle("active"); //remove class from prev td 
              Player1[position + 1].classList.toggle("active"); //add class to next td
              player1Pos++; //player 1 position in next td
          } else if (Player2[position + 1]){
              Player2[position].classList.toggle("active");
              Player2[position + 1].classList.toggle("active");
              player2Pos++;
          }
      }
    </script>

  </body>
</html>
